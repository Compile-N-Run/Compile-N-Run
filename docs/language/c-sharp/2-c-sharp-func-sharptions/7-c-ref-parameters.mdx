---
title: "C# Ref Parameters"
description: "Learn how to use ref parameters in C# functions to modify arguments passed by reference rather than by value, allowing functions to change values in the calling code."

---

# C# Ref Parameters

## Introduction

In C#, parameters are typically passed to methods by value, which means the method receives a copy of the original value. However, there are scenarios where you might want a method to modify the original variable that was passed to it. This is where reference parameters, or "ref parameters," come into play.

The `ref` keyword in C# allows you to pass arguments by reference rather than by value. This means that when you modify the parameter within a method, the original variable in the calling code is also modified.

## How Ref Parameters Work

### Basic Syntax

To use ref parameters in C#:

1. Include the `ref` keyword before the parameter type in the method definition
2. Use the `ref` keyword when passing the argument to the method

Here's the basic syntax:

```csharp
// Method definition with ref parameter
void ModifyValue(ref int number)
{
    number = number * 2;
}

// Calling the method with ref parameter
int value = 10;
ModifyValue(ref value);
// value is now 20
```

## Ref Parameters vs. Value Parameters

Let's compare the difference between passing parameters by value and by reference:

```csharp
public static void Main()
{
    int x = 5;
    Console.WriteLine($"Original value: {x}");
    
    // Pass by value
    ModifyByValue(x);
    Console.WriteLine($"After ModifyByValue: {x}");
    
    // Pass by reference
    ModifyByReference(ref x);
    Console.WriteLine($"After ModifyByReference: {x}");
}

static void ModifyByValue(int num)
{
    num = num * 2;
    Console.WriteLine($"Inside ModifyByValue: {num}");
}

static void ModifyByReference(ref int num)
{
    num = num * 2;
    Console.WriteLine($"Inside ModifyByReference: {num}");
}
```

Output:
```
Original value: 5
Inside ModifyByValue: 10
After ModifyByValue: 5
Inside ModifyByReference: 10
After ModifyByReference: 10
```

As you can see, when we use a regular parameter (without `ref`), changes to the parameter inside the method don't affect the original variable. However, when we use a `ref` parameter, changes to the parameter are reflected in the original variable.

## Important Rules for Ref Parameters

1. **Variables must be initialized** before they can be passed as `ref` parameters.
2. The method with `ref` parameters **cannot accept literal values or constants** as arguments.
3. Properties cannot be passed as `ref` parameters.
4. Both the method definition and method call must use the `ref` keyword.
5. Overloaded methods can be distinguished based on whether a parameter is `ref` or not.

## Example: Swapping Values

A classic example of using `ref` parameters is swapping the values of two variables:

```csharp
public static void Main()
{
    int a = 10;
    int b = 20;
    
    Console.WriteLine($"Before swap: a = {a}, b = {b}");
    
    Swap(ref a, ref b);
    
    Console.WriteLine($"After swap: a = {a}, b = {b}");
}

static void Swap(ref int x, ref int y)
{
    int temp = x;
    x = y;
    y = temp;
}
```

Output:
```
Before swap: a = 10, b = 20
After swap: a = 20, b = 10
```

## Practical Applications of Ref Parameters

### 1. Updating Multiple Values

When a method needs to update multiple values, using `ref` parameters can be more elegant than returning a complex type:

```csharp
public static void Main()
{
    double length = 0, width = 0, area = 0, perimeter = 0;
    
    // Get dimensions from user (simplified here)
    length = 5;
    width = 3;
    
    CalculateRectangleProperties(length, width, ref area, ref perimeter);
    
    Console.WriteLine($"Rectangle with length {length} and width {width}:");
    Console.WriteLine($"Area: {area}");
    Console.WriteLine($"Perimeter: {perimeter}");
}

static void CalculateRectangleProperties(double length, double width, ref double area, ref double perimeter)
{
    area = length * width;
    perimeter = 2 * (length + width);
}
```

Output:
```
Rectangle with length 5 and width 3:
Area: 15
Perimeter: 16
```

### 2. TryParse Pattern

A common pattern in .NET is the "TryParse" pattern, which uses `ref` (or more commonly `out`, a related keyword) to return both a boolean success indicator and the parsed value:

```csharp
public static void Main()
{
    string input = "123";
    int number = 0;
    
    bool success = int.TryParse(input, out number);
    
    if (success)
    {
        Console.WriteLine($"Successfully parsed: {number}");
    }
    else
    {
        Console.WriteLine("Failed to parse input");
    }
}
```

Output:
```
Successfully parsed: 123
```

## Performance Considerations

Using `ref` parameters can improve performance in certain scenarios, especially when working with large structs. Since structs are value types, passing them without `ref` would create a full copy, which can be expensive for large structs.

```csharp
// A large struct (example)
struct LargeStruct
{
    public long Value1;
    public long Value2;
    // ... many more fields
}

// Inefficient - copies the entire struct
void ProcessStructByValue(LargeStruct data)
{
    // Process data
}

// More efficient - passes a reference to the struct
void ProcessStructByRef(ref LargeStruct data)
{
    // Process data
}
```

## Ref Parameters vs. Out Parameters

While `ref` and `out` parameters seem similar, they have a key difference:

- `ref` parameters must be initialized before being passed to the method
- `out` parameters don't need to be initialized before the method call, but must be assigned a value in the method

```csharp
public static void Main()
{
    int a = 5;      // Must be initialized for ref
    int b;          // Doesn't need to be initialized for out
    
    MethodWithRef(ref a);  // a is initialized
    MethodWithOut(out b);  // b doesn't need to be initialized
    
    Console.WriteLine($"a: {a}, b: {b}");
}

static void MethodWithRef(ref int x)
{
    // Can read x's initial value
    x = x * 2;
}

static void MethodWithOut(out int x)
{
    // Cannot read x's initial value
    // MUST assign a value before the method ends
    x = 10;
}
```

Output:
```
a: 10, b: 10
```

## Best Practices for Using Ref Parameters

1. **Use sparingly**: Only use `ref` parameters when necessary, as they can make code harder to understand and maintain.
2. **Document clearly**: Make sure to document methods with `ref` parameters to make it clear they modify input values.
3. **Consider alternatives**: In many cases, returning a value or using a more complex return type might be clearer than using `ref`.
4. **Avoid side effects**: Be cautious about unexpected side effects when modifying input parameters.
5. **Use meaningful names**: Name `ref` parameters in a way that suggests they will be modified.

## Summary

Ref parameters in C# allow you to pass arguments by reference rather than by value. This means that changes to the parameter within a method will affect the original variable in the calling code. This is useful when you need a method to update multiple values or work with large structs efficiently.

Key points to remember about `ref` parameters:
- The `ref` keyword must be used both in the method definition and method call
- Variables must be initialized before being passed as `ref` parameters
- `ref` parameters are useful for passing large value types efficiently
- Use `ref` parameters sparingly and document them well

## Exercises

1. Write a method that uses `ref` parameters to calculate both the minimum and maximum values in an array without using LINQ.
2. Implement a `TryParse` method for a custom type that follows the pattern used by .NET's built-in types.
3. Create a method that uses `ref` parameters to update both the real and imaginary parts of a complex number.
4. Write a program that compares the performance of passing a large struct by value versus by reference.
5. Implement a method that swaps the first and last elements of an array using `ref` parameters.

## Additional Resources

- [Official C# Documentation on ref](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/ref)
- [C# Programming Guide: Passing Parameters](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/passing-parameters)
- [Understanding ref and out parameters in C#](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/passing-reference-type-parameters)