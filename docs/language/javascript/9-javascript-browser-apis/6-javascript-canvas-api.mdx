---
title: JavaScript Canvas API
description: Learn how to create dynamic graphics and animations using the HTML5 Canvas API with JavaScript - from basic shapes to interactive visuals.

---

# JavaScript Canvas API

## Introduction

The Canvas API is a powerful JavaScript feature that allows you to draw graphics, create animations, and design interactive visual content directly in your web browser. It provides a blank rectangular area (the canvas) where you can use JavaScript to draw anything from simple shapes to complex animations and games.

Unlike other HTML elements that are declarative (you describe what you want), canvas is imperative — you have to write code that explicitly draws each element. This gives you incredible flexibility and control over your graphics.

## Getting Started with Canvas

### Creating a Canvas Element

To start using the Canvas API, you first need to add a `<canvas>` element to your HTML:

```html
<canvas id="myCanvas" width="500" height="300"></canvas>
```

This creates a drawable region with the specified dimensions (500px width and 300px height). If you don't specify width and height, the default canvas size will be 300px × 150px.

### Accessing the Canvas Context

To draw on the canvas, you need to get a reference to it in JavaScript and obtain its rendering context:

```javascript
const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');
```

The `getContext('2d')` method returns a 2D rendering context object that provides methods and properties for drawing on the canvas.

## Basic Drawing Operations

### Drawing Shapes

Let's start with some basic shapes:

#### Drawing Rectangles

```javascript
// Draw a filled rectangle
ctx.fillStyle = 'blue';
ctx.fillRect(10, 10, 150, 100);

// Draw a rectangle outline
ctx.strokeStyle = 'red';
ctx.lineWidth = 3;
ctx.strokeRect(180, 10, 150, 100);

// Clear a rectangular area
ctx.clearRect(15, 15, 70, 50);
```

In this example:
- `fillRect(x, y, width, height)` draws a filled rectangle
- `strokeRect(x, y, width, height)` draws a rectangle outline
- `clearRect(x, y, width, height)` clears the specified area

#### Drawing Paths

For more complex shapes, you need to create paths:

```javascript
// Draw a triangle
ctx.beginPath();
ctx.moveTo(75, 50);    // Move to first point
ctx.lineTo(100, 100);  // Line to second point
ctx.lineTo(50, 100);   // Line to third point
ctx.closePath();       // Close the shape
ctx.fillStyle = 'green';
ctx.fill();            // Fill the triangle
ctx.strokeStyle = 'black';
ctx.stroke();          // Add an outline
```

#### Drawing Circles and Arcs

```javascript
// Draw a circle
ctx.beginPath();
ctx.arc(250, 150, 50, 0, Math.PI * 2); // x, y, radius, startAngle, endAngle
ctx.fillStyle = 'orange';
ctx.fill();
```

### Adding Text to Canvas

You can also add text to your canvas:

```javascript
ctx.font = '30px Arial';
ctx.fillStyle = 'purple';
ctx.fillText('Hello Canvas!', 150, 250);

// Text with an outline
ctx.strokeStyle = 'black';
ctx.lineWidth = 1;
ctx.strokeText('Hello Canvas!', 150, 250);
```

## Colors, Styles, and Effects

### Setting Colors and Styles

```javascript
// Using color names
ctx.fillStyle = 'red';

// Using RGB
ctx.fillStyle = 'rgb(255, 0, 0)';

// Using RGBA (with transparency)
ctx.fillStyle = 'rgba(255, 0, 0, 0.5)';

// Using hex values
ctx.fillStyle = '#FF0000';

// Stroke (outline) styles
ctx.strokeStyle = 'blue';
ctx.lineWidth = 5;
```

### Gradients and Patterns

```javascript
// Linear gradient
const gradient = ctx.createLinearGradient(0, 0, 200, 0);
gradient.addColorStop(0, 'red');
gradient.addColorStop(0.5, 'green');
gradient.addColorStop(1, 'blue');
ctx.fillStyle = gradient;
ctx.fillRect(50, 50, 200, 100);

// Radial gradient
const radialGradient = ctx.createRadialGradient(300, 100, 10, 300, 100, 70);
radialGradient.addColorStop(0, 'white');
radialGradient.addColorStop(1, 'purple');
ctx.fillStyle = radialGradient;
ctx.fillRect(200, 50, 200, 100);
```

### Shadows

```javascript
ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
ctx.shadowBlur = 10;
ctx.shadowOffsetX = 5;
ctx.shadowOffsetY = 5;
ctx.fillStyle = 'blue';
ctx.fillRect(50, 300, 100, 80);
```

## Transformations

Canvas allows various transformations to be applied to your drawings:

```javascript
// Save the current state
ctx.save();

// Translate the origin to a different position
ctx.translate(250, 200);

// Rotate the context (in radians)
ctx.rotate(Math.PI / 4); // 45 degrees

// Draw a rectangle at the new transformed position
ctx.fillStyle = 'green';
ctx.fillRect(-50, -50, 100, 100);

// Restore to the previous state
ctx.restore();
```

This code draws a square that's rotated 45 degrees around the point (250, 200).

## Image Manipulation

You can draw images onto your canvas:

```javascript
const img = new Image();
img.src = 'path/to/your/image.jpg';

img.onload = function() {
  // Draw the image once it's loaded
  ctx.drawImage(img, 50, 50, 200, 150);
  
  // You can also crop and scale
  // ctx.drawImage(img, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);
};
```

## Animation with Canvas

Canvas is commonly used for animations. Here's a simple animation example:

```javascript
let x = 0;

function animate() {
  // Clear the canvas
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // Draw a moving rectangle
  ctx.fillStyle = 'blue';
  ctx.fillRect(x, 50, 50, 50);
  
  // Update position
  x = (x + 2) % canvas.width;
  
  // Request the next animation frame
  requestAnimationFrame(animate);
}

// Start the animation
animate();
```

This creates a blue square that continuously moves from left to right across the canvas, wrapping back to the left side once it reaches the right edge.

## Practical Example: Interactive Drawing App

Let's create a simple drawing application that allows users to draw by dragging their mouse:

```html
<canvas id="drawingCanvas" width="600" height="400" style="border: 1px solid black;"></canvas>
```

```javascript
const canvas = document.getElementById('drawingCanvas');
const ctx = canvas.getContext('2d');

let drawing = false;

// Set up event listeners
canvas.addEventListener('mousedown', startDrawing);
canvas.addEventListener('mousemove', draw);
canvas.addEventListener('mouseup', stopDrawing);
canvas.addEventListener('mouseout', stopDrawing);

function startDrawing(e) {
  drawing = true;
  draw(e); // Start drawing immediately at click position
}

function draw(e) {
  if (!drawing) return;
  
  ctx.lineWidth = 5;
  ctx.lineCap = 'round';
  ctx.strokeStyle = 'black';
  
  // Calculate position relative to canvas
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  
  ctx.lineTo(x, y);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(x, y);
}

function stopDrawing() {
  drawing = false;
  ctx.beginPath(); // Start a new path next time draw() is called
}
```

This code creates a simple drawing application where you can draw on the canvas by clicking and dragging your mouse.

## Practical Example: Data Visualization

Let's create a simple bar chart to visualize some data:

```javascript
function drawBarChart() {
  const canvas = document.getElementById('chartCanvas');
  const ctx = canvas.getContext('2d');
  
  // Sample data
  const data = [50, 120, 80, 200, 150, 100];
  const barWidth = 50;
  const barSpacing = 20;
  const chartHeight = 300;
  const startX = 50;
  const startY = 350;
  
  // Clear canvas
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // Draw axes
  ctx.beginPath();
  ctx.moveTo(40, 50);
  ctx.lineTo(40, startY);
  ctx.lineTo(startX + (barWidth + barSpacing) * data.length, startY);
  ctx.strokeStyle = 'black';
  ctx.stroke();
  
  // Draw bars
  for (let i = 0; i < data.length; i++) {
    const x = startX + i * (barWidth + barSpacing);
    const barHeight = data[i];
    
    // Create gradient for each bar
    const gradient = ctx.createLinearGradient(0, startY, 0, startY - barHeight);
    gradient.addColorStop(0, 'rgba(75, 192, 192, 1)');
    gradient.addColorStop(1, 'rgba(75, 192, 192, 0.5)');
    
    // Draw bar
    ctx.fillStyle = gradient;
    ctx.fillRect(x, startY - barHeight, barWidth, barHeight);
    
    // Add value label
    ctx.fillStyle = 'black';
    ctx.font = '14px Arial';
    ctx.fillText(data[i], x + barWidth/2 - 10, startY - barHeight - 10);
    
    // Add x-axis label
    ctx.fillText(`Item ${i+1}`, x + barWidth/2 - 20, startY + 20);
  }
  
  // Add title
  ctx.font = 'bold 18px Arial';
  ctx.fillText('Simple Bar Chart', canvas.width/2 - 70, 30);
}

// Draw the chart
drawBarChart();
```

Add the following HTML:

```html
<canvas id="chartCanvas" width="600" height="400" style="border: 1px solid #ddd;"></canvas>
```

## Performance Tips for Canvas

1. **Batch your drawing operations**: Group similar operations together to minimize state changes.
2. **Use `requestAnimationFrame` instead of `setInterval` or `setTimeout` for animations**: It's optimized for animations and respects the browser's refresh rate.
3. **Cache complex drawings** in off-screen canvases if they don't change often.
4. **Optimize clearing the canvas**: Instead of `clearRect()` for the whole canvas every frame, you can sometimes just clear the areas that change.
5. **Be mindful of canvas size**: Larger canvases require more memory and processing power.

## Browser Compatibility

The Canvas API is supported in all modern browsers including Chrome, Firefox, Safari, and Edge. However, for older browsers, you might need to provide fallback content:

```html
<canvas id="myCanvas" width="500" height="300">
  Your browser does not support the canvas element. Please upgrade to a newer browser.
</canvas>
```

## Summary

The Canvas API provides a powerful way to create graphics, animations, and interactive visual content directly in the browser using JavaScript. We've covered:

- Setting up a canvas and getting its context
- Drawing basic shapes, paths, and text
- Working with colors, styles, and effects
- Applying transformations
- Manipulating images
- Creating animations
- Building practical examples like a drawing app and data visualization

The Canvas API opens up endless possibilities for creating dynamic content on the web, from simple graphs to complex games and interactive applications.

## Additional Resources and Exercises

### Resources

1. [MDN Canvas API Documentation](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API)
2. [HTML5 Canvas Tutorials on W3Schools](https://www.w3schools.com/html/html5_canvas.asp)
3. [Canvas Deep Dive eBook](https://joshondesign.com/p/books/canvasdeepdive/toc.html)

### Exercises

1. **Create a clock**: Build an analog clock that shows the current time using the canvas.
2. **Build a simple game**: Create a basic game like Pong or Breakout using canvas animations.
3. **Image filters**: Load an image into a canvas and apply different filters (grayscale, blur, etc.).
4. **Interactive chart**: Extend the bar chart example to respond to user interactions.
5. **Particle system**: Create a particle system that simulates effects like fire, snow, or rain.

By practicing these exercises, you'll gain a deeper understanding of the Canvas API and strengthen your JavaScript skills. Happy coding!