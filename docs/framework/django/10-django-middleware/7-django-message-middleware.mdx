---
title: Django Message Middleware
description: Learn how to use Django's Message Middleware to communicate feedback to users through flash messages in your Django applications.

---

# Django Message Middleware

Django's message framework provides a way to send one-time notifications to users after processing a form or performing some action. The Message Middleware is a key component that enables this functionality, allowing you to store messages during one request and retrieve and display them during a subsequent request.

## Introduction to Message Middleware

Django's Message Middleware (`django.contrib.messages.middleware.MessageMiddleware`) is part of Django's built-in messaging framework. It provides a simple way to pass temporary messages to users between requests. These messages, often called "flash messages," are perfect for providing feedback after form submissions, login attempts, or other user actions.

Common use cases include:
- Success messages after form submissions
- Error notifications
- Warning messages
- Informational updates
- Debug information during development

## How Message Middleware Works

The Message Middleware operates as part of Django's request/response cycle:

1. During request processing, it retrieves any messages stored for the current user
2. Your views can add messages during request processing
3. During response processing, any unread messages are stored for the next request
4. When rendering templates, you can display these messages to the user

## Setting Up Message Middleware

The Message Middleware is typically included by default in new Django projects. You can verify this by checking your `settings.py` file:

```python
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',  # This is the Message Middleware
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]
```

:::note
The `MessageMiddleware` should be placed after the `SessionMiddleware` because it depends on session functionality.
:::

Additionally, make sure the `messages` app is included in your `INSTALLED_APPS`:

```python
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',  # This enables the messaging framework
    'django.contrib.staticfiles',
    # Your custom apps...
]
```

## Using Messages in Views

Django provides several message levels that help categorize messages based on their purpose:

- `messages.DEBUG`: Development-related information (only displayed if `DEBUG=True`)
- `messages.INFO`: Informational messages
- `messages.SUCCESS`: Success messages (e.g., after successful form submission)
- `messages.WARNING`: Warning messages
- `messages.ERROR`: Error messages (e.g., form validation errors)

Here's a basic example of using messages in a view:

```python
from django.contrib import messages
from django.shortcuts import redirect, render

def contact_form(request):
    if request.method == 'POST':
        # Process form data
        name = request.POST.get('name')
        email = request.POST.get('email')
        message = request.POST.get('message')
        
        if not name or not email or not message:
            messages.error(request, "Please fill out all fields!")
            return render(request, 'contact_form.html')
        
        # Save contact message to database or send email
        # ...
        
        # Provide success feedback to user
        messages.success(request, "Your message has been sent successfully!")
        return redirect('home')
    
    return render(request, 'contact_form.html')
```

## Displaying Messages in Templates

To display messages in your templates, you can loop through the `messages` context variable that is automatically added by the Message Middleware:

```html
{% if messages %}
<div class="messages">
    {% for message in messages %}
    <div class="alert alert-{% if message.tags %}{{ message.tags }}{% endif %}">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}
```

If you're using Bootstrap, you can adapt the CSS classes to match the message levels:

```html
{% if messages %}
<div class="messages">
    {% for message in messages %}
    <div class="alert 
        {% if message.tags == 'debug' %}alert-dark{% endif %}
        {% if message.tags == 'info' %}alert-info{% endif %}
        {% if message.tags == 'success' %}alert-success{% endif %}
        {% if message.tags == 'warning' %}alert-warning{% endif %}
        {% if message.tags == 'error' %}alert-danger{% endif %}
        alert-dismissible fade show">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
</div>
{% endif %}
```

## Real-world Example: User Authentication Feedback

Let's explore a practical example involving user authentication. We'll add appropriate messages for login, logout, and registration actions:

```python
# views.py
from django.contrib import messages
from django.contrib.auth import authenticate, login, logout
from django.shortcuts import redirect, render

def login_view(request):
    if request.method == 'POST':
        username = request.POST.get('username')
        password = request.POST.get('password')
        
        user = authenticate(request, username=username, password=password)
        
        if user is not None:
            login(request, user)
            messages.success(request, f"Welcome back, {user.username}!")
            return redirect('dashboard')
        else:
            messages.error(request, "Invalid username or password.")
            return render(request, 'login.html')
    
    return render(request, 'login.html')

def logout_view(request):
    logout(request)
    messages.info(request, "You have been logged out.")
    return redirect('home')

def register_view(request):
    if request.method == 'POST':
        # Simplified example - you'd use a form in practice
        username = request.POST.get('username')
        
        # Check if username exists
        if User.objects.filter(username=username).exists():
            messages.warning(request, "Username already taken.")
            return render(request, 'register.html')
            
        # Create user...
        # ...
        
        messages.success(request, "Registration successful! Please log in.")
        return redirect('login')
    
    return render(request, 'register.html')
```

## Advanced Message Configuration

Django allows you to configure various aspects of the messaging framework in your `settings.py`:

```python
# Example message settings
MESSAGE_STORAGE = 'django.contrib.messages.storage.session.SessionStorage'

# Optional: Define custom message levels
from django.contrib.messages import constants as message_constants
MESSAGE_TAGS = {
    message_constants.DEBUG: 'debug',
    message_constants.INFO: 'info',
    message_constants.SUCCESS: 'success',
    message_constants.WARNING: 'warning',
    message_constants.ERROR: 'danger',  # Change 'error' to 'danger' for Bootstrap
}
```

Django provides three built-in storage backends for messages:

1. `SessionStorage` (default): Stores messages in the session
2. `CookieStorage`: Stores messages in a cookie
3. `FallbackStorage`: Tries SessionStorage first, then falls back to CookieStorage

## Adding Extra Functionality to Messages

You can also add extra data to your messages for more complex scenarios:

```python
messages.success(
    request, 
    "Item added to cart successfully!", 
    extra_tags='cart-update'
)
```

In your template, you can then use this extra information:

```html
{% if messages %}
<div class="messages">
    {% for message in messages %}
    <div class="alert alert-{% if message.tags %}{{ message.tags }}{% endif %}" 
         {% if 'cart-update' in message.extra_tags %}data-cart-update="true"{% endif %}>
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}
```

## AJAX Support

When working with AJAX, you might want to include messages in your JSON responses. Here's an example:

```python
from django.http import JsonResponse
from django.contrib.messages import get_messages

def ajax_action(request):
    if request.method == 'POST':
        # Do something
        messages.success(request, "Operation completed successfully")
        
        # Prepare JSON response with messages
        message_list = []
        for message in get_messages(request):
            message_list.append({
                'message': str(message),
                'level': message.level,
                'tags': message.tags,
            })
        
        return JsonResponse({
            'status': 'success',
            'messages': message_list
        })
```

## Summary

Django's Message Middleware provides a powerful way to communicate with users between requests. It enables temporary flash messages that provide feedback about actions, making your application more user-friendly and interactive.

Key points to remember:

- Message Middleware depends on Session Middleware and requires the messages app in `INSTALLED_APPS`
- Different message levels help categorize messages (DEBUG, INFO, SUCCESS, WARNING, ERROR)
- Messages are added in views and displayed in templates
- Message storage can be configured to use sessions (default), cookies, or a fallback approach

By using the Message Middleware effectively, you can create a more interactive user experience with meaningful feedback throughout your application.

## Exercises

1. Create a simple Django application with a form that uses the messages framework to provide feedback after submission
2. Implement a message display component that uses JavaScript to fade out messages after a few seconds
3. Extend the message display to show different icons based on the message level
4. Create a custom middleware that automatically adds a welcome message for first-time visitors
5. Build an AJAX form that handles and displays messages without a page reload

## Additional Resources

- [Django Official Documentation: The messages framework](https://docs.djangoproject.com/en/stable/ref/contrib/messages/)
- [Django Official Documentation: MessageMiddleware](https://docs.djangoproject.com/en/stable/ref/middleware/#django.contrib.messages.middleware.MessageMiddleware)
- [Django's Class-Based Views and Messages](https://docs.djangoproject.com/en/stable/topics/class-based-views/generic-editing/#django.views.generic.edit.FormMixin.get_success_url)