---
title: Spring MVC ModelAndView
description: Learn how to use ModelAndView in Spring MVC to handle data and views in your web applications

---

# Spring MVC ModelAndView

## Introduction

In Spring MVC, the `ModelAndView` class is a fundamental component that plays a crucial role in the request-response cycle. It combines two essential parts of the MVC pattern:

1. **Model**: Contains the data to be displayed on the view
2. **View**: Specifies which view should render the response

`ModelAndView` provides a convenient way to pass both data and view information from a controller method back to the DispatcherServlet, which then processes the view and sends the response to the client.

## Understanding ModelAndView Basics

### What is ModelAndView?

`ModelAndView` is a holder class that contains both model data and view information. It acts as a container that the Spring MVC framework uses to pass information between controllers and views.

The class serves two purposes:
- It specifies which view should render the response
- It provides the data that the view needs to display

### Key Components

1. **View Name/Object**: Identifies which view should render the response
2. **Model Attributes**: Key-value pairs representing the data to be displayed
3. **Status Code**: Optional HTTP status for the response

## Creating and Using ModelAndView

Let's look at how to create and use a `ModelAndView` object in a Spring MVC controller.

### Basic Usage

```java
@Controller
public class ProductController {
    
    @RequestMapping("/product")
    public ModelAndView getProduct() {
        // Create a new ModelAndView object with the view name
        ModelAndView modelAndView = new ModelAndView("productDetails");
        
        // Add attributes to the model
        modelAndView.addObject("productName", "Laptop");
        modelAndView.addObject("productPrice", 999.99);
        
        return modelAndView;
    }
}
```

In this example:
- We create a new `ModelAndView` instance specifying "productDetails" as the view name
- We add two attributes to the model: "productName" and "productPrice"
- The method returns the `ModelAndView` object to Spring's DispatcherServlet

Spring will look for a view named "productDetails" (usually a JSP, Thymeleaf, or other template) and pass the model attributes to it.

### Alternative Construction Methods

There are several ways to create a `ModelAndView`:

```java
// Empty constructor - set view name and attributes later
ModelAndView modelAndView = new ModelAndView();
modelAndView.setViewName("viewName");

// Constructor with view name
ModelAndView modelAndView = new ModelAndView("viewName");

// Constructor with view name and a model attribute
ModelAndView modelAndView = new ModelAndView("viewName", "attributeName", attributeValue);

// Constructor with view name and model map
Map<String, Object> model = new HashMap<>();
model.put("attribute1", value1);
model.put("attribute2", value2);
ModelAndView modelAndView = new ModelAndView("viewName", model);
```

## ModelAndView vs. Model + View Name

Spring MVC controllers can return various types. Two common approaches are:

1. Returning a `ModelAndView` object
2. Returning a view name (String) and using a `Model` parameter

Here's a comparison:

**Using ModelAndView:**

```java
@RequestMapping("/greeting")
public ModelAndView greeting() {
    ModelAndView modelAndView = new ModelAndView("greeting");
    modelAndView.addObject("message", "Hello, World!");
    return modelAndView;
}
```

**Using Model + View Name:**

```java
@RequestMapping("/greeting")
public String greeting(Model model) {
    model.addAttribute("message", "Hello, World!");
    return "greeting";
}
```

Both approaches achieve the same result, but `ModelAndView` combines both elements into a single object. The choice between them is often based on personal preference or specific requirements.

## Practical Examples

### Example 1: User Registration Form

This example shows how to use `ModelAndView` to handle a user registration form:

```java
@Controller
public class RegistrationController {

    @GetMapping("/register")
    public ModelAndView showRegistrationForm() {
        ModelAndView modelAndView = new ModelAndView("registration");
        // Add a new empty User object to the form
        modelAndView.addObject("user", new User());
        return modelAndView;
    }

    @PostMapping("/register")
    public ModelAndView processRegistration(@ModelAttribute User user) {
        // Process registration logic here
        
        ModelAndView modelAndView = new ModelAndView("registrationSuccess");
        modelAndView.addObject("registeredUser", user);
        return modelAndView;
    }
}
```

### Example 2: Error Handling

`ModelAndView` is also useful for error handling scenarios:

```java
@Controller
public class ProductController {

    @Autowired
    private ProductService productService;

    @GetMapping("/product/{id}")
    public ModelAndView getProduct(@PathVariable("id") Long productId) {
        try {
            Product product = productService.findById(productId);
            ModelAndView modelAndView = new ModelAndView("productDetails");
            modelAndView.addObject("product", product);
            return modelAndView;
            
        } catch (ProductNotFoundException ex) {
            ModelAndView errorView = new ModelAndView("errorPage");
            errorView.addObject("errorMessage", "Product not found");
            errorView.setStatus(HttpStatus.NOT_FOUND);
            return errorView;
        }
    }
}
```

### Example 3: Dynamic View Selection

We can select the view dynamically based on certain conditions:

```java
@Controller
public class UserController {

    @GetMapping("/account")
    public ModelAndView getAccountPage(HttpSession session) {
        User user = (User) session.getAttribute("currentUser");
        ModelAndView modelAndView;
        
        if (user.getRole().equals("ADMIN")) {
            modelAndView = new ModelAndView("adminDashboard");
        } else {
            modelAndView = new ModelAndView("userDashboard");
        }
        
        modelAndView.addObject("user", user);
        return modelAndView;
    }
}
```

## Advanced ModelAndView Features

### Setting HTTP Status

You can set the HTTP status of the response:

```java
ModelAndView modelAndView = new ModelAndView("errorPage");
modelAndView.setStatus(HttpStatus.NOT_FOUND); // Sets 404 status code
```

### Redirecting

`ModelAndView` can also be used for redirects:

```java
ModelAndView modelAndView = new ModelAndView("redirect:/success");
// Or with parameters
ModelAndView modelAndView = new ModelAndView("redirect:/user?id=123");
```

### Forwarding

Similar to redirects, but the URL doesn't change in the browser:

```java
ModelAndView modelAndView = new ModelAndView("forward:/dashboard");
```

### Flash Attributes with Redirects

When redirecting, normal model attributes are lost. You can use RedirectAttributes, but with ModelAndView it requires extra steps:

```java
@PostMapping("/saveProduct")
public ModelAndView saveProduct(Product product, RedirectAttributes redirectAttributes) {
    productService.save(product);
    redirectAttributes.addFlashAttribute("message", "Product saved successfully!");
    return new ModelAndView("redirect:/productList");
}
```

## Best Practices

1. **Keep view logic separate**: Avoid complex logic in your controller methods
2. **Use meaningful attribute names**: Make your view templates easier to understand
3. **Consistent naming conventions**: For both view names and model attributes
4. **Consider using Model + view name**: For simpler cases, this approach may be clearer
5. **Use ModelAndView for complex scenarios**: When you need to set HTTP status or have dynamic view logic

## Summary

`ModelAndView` is a versatile and powerful class in Spring MVC that combines the model (data) and view (template) information in a single object. It provides a convenient way to:

- Specify which view should handle the response
- Pass data to the view through model attributes
- Configure response details like HTTP status codes
- Handle redirects and forwards

While Spring offers alternative approaches like the Model + view name pattern, `ModelAndView` remains an important tool in your Spring MVC toolkit, especially for complex scenarios and dynamic view selection.

## Additional Resources

- [Official Spring Documentation on ModelAndView](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/ModelAndView.html)
- [Spring MVC Reference Guide](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html)

## Exercises

1. Create a simple Spring MVC controller that displays a form for creating a new blog post using `ModelAndView`
2. Modify your controller to handle form submission and show success/error messages using appropriate views
3. Implement error handling by creating a controller that uses `ModelAndView` to display custom error pages with appropriate HTTP status codes
4. Create a controller that dynamically selects one of three different views based on a request parameter