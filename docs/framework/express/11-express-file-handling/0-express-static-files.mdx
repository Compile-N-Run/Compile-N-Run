---
title: Express Static Files
description: Learn how to serve static files like images, CSS, and JavaScript in Express.js applications

---

# Express Static Files

## Introduction

When building web applications with Express.js, you'll often need to serve static files such as images, CSS stylesheets, JavaScript files, and other assets. Express provides a built-in middleware called `express.static` that makes serving static files straightforward and efficient.

Static files are files that don't change frequently and can be served directly to the client without any processing on the server side. This is different from dynamic content that might be generated based on user input or other varying factors.

In this tutorial, you'll learn how to:
- Set up static file serving in Express
- Configure multiple static directories
- Apply options to customize static file serving
- Structure your project for efficient static file management

## What Are Static Files?

Static files include:

- CSS files for styling
- JavaScript files for client-side functionality
- Images, videos, and audio files
- Downloadable documents (PDF, DOCX, etc.)
- Font files
- Any other unchanging assets

## Setting Up Static File Serving

### Basic Usage

To serve static files in Express, use the `express.static` middleware. Here's how to set it up:

```javascript
const express = require('express');
const app = express();
const path = require('path');

// Serve static files from a directory called 'public'
app.use(express.static('public'));

app.listen(3000, () => {
  console.log('Server running on port 3000');
});
```

With this setup, any files in the `public` directory become accessible at the root URL of your website.

For example:
- A file at `public/images/logo.png` is accessible at `http://localhost:3000/images/logo.png`
- A file at `public/css/style.css` is accessible at `http://localhost:3000/css/style.css`
- A file at `public/js/script.js` is accessible at `http://localhost:3000/js/script.js`

### Using Absolute Paths

It's a good practice to use absolute paths when specifying your static directory:

```javascript
const express = require('express');
const app = express();
const path = require('path');

// Use path.join to create an absolute path
app.use(express.static(path.join(__dirname, 'public')));

app.listen(3000, () => {
  console.log('Server running on port 3000');
});
```

Using absolute paths ensures your application works correctly regardless of the directory from which you start your Node.js process.

## Creating a Virtual Path Prefix

Sometimes you might want to create a "virtual path prefix" for your static files. This means the path that appears in the URL doesn't directly correspond to the folder structure on your server:

```javascript
const express = require('express');
const app = express();
const path = require('path');

// Files in public directory will be accessible under /assets URL prefix
app.use('/assets', express.static(path.join(__dirname, 'public')));

app.listen(3000, () => {
  console.log('Server running on port 3000');
});
```

With this setup:
- A file at `public/images/logo.png` is accessible at `http://localhost:3000/assets/images/logo.png`
- A file at `public/css/style.css` is accessible at `http://localhost:3000/assets/css/style.css`

## Serving from Multiple Directories

You can serve static files from multiple directories by calling `express.static` multiple times:

```javascript
const express = require('express');
const app = express();
const path = require('path');

// Serve files from 'public' directory
app.use(express.static(path.join(__dirname, 'public')));

// Serve files from 'uploads' directory
app.use(express.static(path.join(__dirname, 'uploads')));

// Serve vendor libraries with a virtual path prefix
app.use('/vendor', express.static(path.join(__dirname, 'node_modules')));

app.listen(3000, () => {
  console.log('Server running on port 3000');
});
```

Express searches for files in the order that the static directories are set up. If a file with the same name exists in both directories, the one in the first directory will be served.

## Configuring Static File Options

`express.static` accepts an options object as its second parameter to customize its behavior:

```javascript
const express = require('express');
const app = express();
const path = require('path');

const options = {
  dotfiles: 'ignore',     // How to handle dotfiles (files starting with .)
  etag: true,             // Enable or disable etag generation
  extensions: ['html', 'htm'], // Add file extension fallbacks
  index: 'index.html',    // Set the default file to serve
  maxAge: '1d',           // Set Cache-Control max-age header in milliseconds or as string
  redirect: true,         // Redirect to trailing "/" when the pathname is a directory
  setHeaders: function (res, path, stat) {
    // Custom function to set HTTP headers
    res.set('x-timestamp', Date.now());
  }
};

app.use(express.static(path.join(__dirname, 'public'), options));

app.listen(3000, () => {
  console.log('Server running on port 3000');
});
```

## Practical Example: Building a Simple Website

Let's create a simple website with HTML, CSS, JavaScript, and image files:

### Project Structure

```
my-express-site/
├── server.js
├── public/
│   ├── index.html
│   ├── about.html
│   ├── css/
│   │   └── style.css
│   ├── js/
│   │   └── main.js
│   └── images/
│       └── logo.png
```

### Server Code (server.js)

```javascript
const express = require('express');
const path = require('path');
const app = express();

// Serve static files from public directory
app.use(express.static(path.join(__dirname, 'public')));

// Define a route for the home page
app.get('/', (req, res) => {
  res.sendFile(path.join(__dirname, 'public', 'index.html'));
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});
```

### Example HTML File (public/index.html)

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Express Website</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header>
    <img src="/images/logo.png" alt="Website Logo">
    <h1>Welcome to My Express Website</h1>
  </header>
  
  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/about.html">About</a></li>
    </ul>
  </nav>
  
  <main>
    <p>This is a simple website served using Express static files!</p>
  </main>
  
  <script src="/js/main.js"></script>
</body>
</html>
```

### CSS Example (public/css/style.css)

```css
body {
  font-family: Arial, sans-serif;
  line-height: 1.6;
  margin: 0;
  padding: 20px;
  color: #333;
}

header {
  background-color: #f4f4f4;
  padding: 20px;
  text-align: center;
}

header img {
  max-width: 200px;
}

nav ul {
  list-style: none;
  padding: 0;
  display: flex;
  background-color: #333;
}

nav li {
  padding: 10px 20px;
}

nav a {
  color: white;
  text-decoration: none;
}

main {
  padding: 20px;
}
```

### JavaScript Example (public/js/main.js)

```javascript
// Wait for DOM to be fully loaded
document.addEventListener('DOMContentLoaded', () => {
  console.log('Website loaded successfully!');
  
  // Add a timestamp to show when the page was accessed
  const footer = document.createElement('footer');
  footer.innerHTML = `
    <p>Page accessed on: ${new Date().toLocaleString()}</p>
  `;
  document.body.appendChild(footer);
});
```

## Security Considerations

When serving static files, keep these security considerations in mind:

1. **Don't serve sensitive files**: Ensure that your static directories don't contain sensitive information like environment variables, configuration files, or private data.

2. **Control access to dotfiles**: By default, Express doesn't serve files that begin with a dot (like `.env`). You can control this behavior with the `dotfiles` option.

3. **Set appropriate headers**: For security-critical applications, consider setting appropriate headers, like Content-Security-Policy.

```javascript
app.use(express.static('public', {
  setHeaders: (res, path) => {
    // Add security headers
    res.setHeader('X-Content-Type-Options', 'nosniff');
    res.setHeader('X-Frame-Options', 'SAMEORIGIN');
    res.setHeader('X-XSS-Protection', '1; mode=block');
  }
}));
```

## Best Practices

1. **Use a CDN for production**: For production applications, consider using a Content Delivery Network (CDN) for static files to improve loading times.

2. **Enable compression**: Use compression middleware to reduce the size of your static files:

```javascript
const compression = require('compression');
const express = require('express');
const app = express();

// Use compression
app.use(compression());

// Serve static files
app.use(express.static('public'));
```

3. **Set appropriate cache headers**: Set cache headers to reduce server load and improve performance:

```javascript
app.use(express.static('public', {
  maxAge: '1d' // Cache static assets for 1 day
}));
```

4. **Organize files by type**: Keep your static files organized by type (CSS, JavaScript, images, etc.) for better maintainability.

## Summary

In this tutorial, you learned how to:
- Set up Express.js to serve static files using `express.static` middleware
- Configure virtual path prefixes for static files
- Serve files from multiple directories
- Customize static file serving with options
- Create a practical example of a simple website
- Apply security best practices when serving static files

Static file serving is an essential part of building web applications with Express.js. By understanding how to efficiently serve and manage static files, you can create better-performing, more maintainable web applications.

## Additional Resources

- [Express.js Official Documentation on Static Files](https://expressjs.com/en/starter/static-files.html)
- [MDN Web Docs: Serving static files in Express](https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/Introduction#Serving_static_files)

## Exercises

1. Create an Express application that serves a portfolio website with HTML, CSS, and JavaScript files.
2. Modify your Express server to serve static files from two different directories with different virtual paths.
3. Implement appropriate caching strategies for different types of static files (e.g., longer cache for images, shorter for JavaScript).
4. Create a static file server that includes custom security headers for all responses.