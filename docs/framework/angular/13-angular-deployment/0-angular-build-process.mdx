---
title: Angular Build Process
description: A comprehensive guide to understanding how Angular applications are built and prepared for deployment

---

# Angular Build Process

## Introduction

When it comes to deploying an Angular application, understanding the build process is crucial. The build process is the mechanism by which your Angular code is transformed from human-readable TypeScript, HTML, and CSS into optimized bundles that can be served to users. This transformation process is essential to ensure your application runs efficiently in production environments.

In this guide, we'll explore the Angular build process in detail, covering everything from development builds to production optimization, and the various configuration options available to tailor the process to your needs.

## The Basics of Angular Build

At its core, the Angular build process involves several key steps:

1. **Compilation**: Converting TypeScript to JavaScript
2. **Bundling**: Combining related code into bundles
3. **Minification**: Removing unnecessary characters and whitespace
4. **Tree-shaking**: Eliminating unused code
5. **Asset processing**: Handling images, fonts, and other static assets

Let's start by looking at the basic command to build an Angular application:

```bash
ng build
```

By default, this command creates a development build in the `dist/` folder of your project. For production builds, you'll use:

```bash
ng build --configuration production
```

## Understanding angular.json Configuration

The build process is configured through the `angular.json` file, which contains settings for different build configurations.

Here's a simplified example of what the `angular.json` build configuration might look like:

```json
{
  "projects": {
    "my-app": {
      "architect": {
        "build": {
          "builder": "@angular-devkit/build-angular:browser",
          "options": {
            "outputPath": "dist/my-app",
            "index": "src/index.html",
            "main": "src/main.ts",
            "polyfills": ["zone.js"],
            "tsConfig": "tsconfig.app.json",
            "assets": ["src/favicon.ico", "src/assets"],
            "styles": ["src/styles.css"],
            "scripts": []
          },
          "configurations": {
            "production": {
              "budgets": [
                {
                  "type": "initial",
                  "maximumWarning": "500kb",
                  "maximumError": "1mb"
                }
              ],
              "outputHashing": "all",
              "sourceMap": false
            },
            "development": {
              "buildOptimizer": false,
              "optimization": false,
              "vendorChunk": true,
              "extractLicenses": false,
              "sourceMap": true,
              "namedChunks": true
            }
          },
          "defaultConfiguration": "production"
        }
      }
    }
  }
}
```

## Development vs Production Builds

Angular provides different build configurations for development and production environments:

### Development Build

Development builds prioritize debugging capabilities and faster build times:

```bash
ng build --configuration development
```

Key characteristics:
- Source maps are included for easier debugging
- No aggressive optimizations
- Code is not minified or mangled
- Faster build time but larger bundle size

### Production Build

Production builds focus on optimizing performance and minimizing bundle sizes:

```bash
ng build --configuration production
```

Key characteristics:
- Minification and uglification of code
- Ahead-of-Time (AOT) compilation by default
- Tree-shaking to remove unused code
- No source maps (unless explicitly configured)
- Asset optimization
- Smaller bundle size but longer build time

## The Build Output

After running the build command, Angular generates several files in the output directory (usually `dist/`):

- **main.[hash].js**: Your application code
- **polyfills.[hash].js**: Polyfills that provide modern functionality on older browsers
- **runtime.[hash].js**: The webpack runtime
- **styles.[hash].css**: Your compiled styles
- **vendor.[hash].js**: Third-party libraries
- **index.html**: The HTML entry point

The hash in the filenames is for cache-busting purposes, ensuring users always get the latest version when you deploy updates.

## Ahead-of-Time (AOT) Compilation

A critical part of the Angular build process is AOT compilation, which compiles your templates during build time rather than at runtime:

```bash
ng build --aot
```

Benefits of AOT compilation:
1. **Faster rendering**: No need to compile templates in the browser
2. **Smaller bundle size**: Compiler is not shipped to the browser
3. **Early error detection**: Template errors are caught during build
4. **Enhanced security**: Reduces the risk of injection attacks

Since Angular 9, AOT compilation is the default for both development and production builds.

## Customizing the Build Process

You can customize the build process to fit your specific needs using various options:

### 1. Budget Configuration

Angular allows you to set budget thresholds for your application size:

```json
"budgets": [
  {
    "type": "initial",
    "maximumWarning": "500kb",
    "maximumError": "1mb"
  },
  {
    "type": "anyComponentStyle",
    "maximumWarning": "2kb",
    "maximumError": "4kb"
  }
]
```

This will generate warnings or errors if your application exceeds the specified sizes.

### 2. Source Maps

For debugging purposes, you might want to include source maps in production builds:

```json
"configurations": {
  "production": {
    "sourceMap": true
  }
}
```

### 3. Custom Environment Configuration

Angular allows you to define different environment configurations:

First, create environment files:

**src/environments/environment.ts**:
```typescript
export const environment = {
  production: false,
  apiUrl: 'http://localhost:3000/api'
};
```

**src/environments/environment.prod.ts**:
```typescript
export const environment = {
  production: true,
  apiUrl: 'https://api.myapp.com'
};
```

Then, import and use the environment in your code:

```typescript
import { environment } from '../environments/environment';

@Component({
  selector: 'app-root',
  template: `<h1>API URL: {{ apiUrl }}</h1>`
})
export class AppComponent {
  apiUrl = environment.apiUrl;
}
```

## Optimizing Build Performance

Here are some strategies to improve the performance of your Angular build:

### 1. Using Build Cache

Enable build caching to speed up subsequent builds:

```bash
ng build --cache
```

### 2. Differential Loading

Angular automatically generates differential bundles for modern and legacy browsers:

```json
"target": "es2015",
"differential": true
```

This means modern browsers will receive smaller, optimized bundles.

### 3. Lazy Loading

Implement lazy loading for modules that aren't immediately needed:

```typescript
// In your routing configuration
const routes: Routes = [
  {
    path: 'customers',
    loadChildren: () => import('./customers/customers.module').then(m => m.CustomersModule)
  }
];
```

This results in separate bundles that are loaded on demand.

## Real-World Example: Building for Multiple Environments

Let's look at a complete example of setting up builds for multiple environments:

1. First, create environment files:

**src/environments/environment.ts**:
```typescript
export const environment = {
  production: false,
  apiUrl: 'http://localhost:3000/api',
  enableDebug: true
};
```

**src/environments/environment.staging.ts**:
```typescript
export const environment = {
  production: true,
  apiUrl: 'https://staging-api.example.com',
  enableDebug: true
};
```

**src/environments/environment.prod.ts**:
```typescript
export const environment = {
  production: true,
  apiUrl: 'https://api.example.com',
  enableDebug: false
};
```

2. Configure the environments in `angular.json`:

```json
"configurations": {
  "production": {
    "fileReplacements": [
      {
        "replace": "src/environments/environment.ts",
        "with": "src/environments/environment.prod.ts"
      }
    ],
    "optimization": true,
    "outputHashing": "all"
  },
  "staging": {
    "fileReplacements": [
      {
        "replace": "src/environments/environment.ts",
        "with": "src/environments/environment.staging.ts"
      }
    ],
    "optimization": true,
    "outputHashing": "all"
  }
}
```

3. Build for specific environments:

```bash
# Development build
ng build

# Staging build
ng build --configuration staging

# Production build
ng build --configuration production
```

4. Use the environment configuration in your service:

```typescript
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { environment } from '../environments/environment';

@Injectable({
  providedIn: 'root'
})
export class DataService {
  constructor(private http: HttpClient) {}

  fetchData() {
    const url = `${environment.apiUrl}/data`;
    
    // Only log in debug mode
    if (environment.enableDebug) {
      console.log(`Fetching data from: ${url}`);
    }
    
    return this.http.get(url);
  }
}
```

## Common Build Issues and Solutions

### 1. Out of Memory Errors

When building large applications, you might encounter memory issues:

```
FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory
```

Solution:
```bash
export NODE_OPTIONS=--max_old_space_size=8192
ng build
```

### 2. Long Build Times

For projects with many components, build times can become lengthy.

Solutions:
- Enable incremental builds in `tsconfig.json`:
```json
"angularCompilerOptions": {
  "incremental": true
}
```
- Use build cache:
```bash
ng build --cache
```

### 3. Large Bundle Sizes

If your bundle sizes are too large:

Solutions:
- Implement lazy loading
- Review and remove unused dependencies
- Use the bundle analyzer:
```bash
ng build --stats-json
npx webpack-bundle-analyzer dist/your-project-name/stats.json
```

## Summary

The Angular build process is a powerful system that transforms your development code into optimized bundles ready for deployment. By understanding how this process works, you can:

- Choose the right build configuration for your needs
- Optimize your application for production
- Customize the build process to suit different environments
- Diagnose and fix build-related issues

Mastering the build process is essential for efficient Angular application deployment and maintenance, ensuring your users get the best possible performance.

## Additional Resources

- [Official Angular Build Documentation](https://angular.io/guide/build)
- [Angular Workspace Configuration](https://angular.io/guide/workspace-config)
- [Deployment Guide](https://angular.io/guide/deployment)

## Practice Exercises

1. Create a new Angular project and explore the default build configurations in the `angular.json` file.
2. Set up at least three different environment configurations (development, staging, and production) and build your app for each environment.
3. Implement lazy loading for a feature module and observe how it affects your build output.
4. Use the webpack-bundle-analyzer to analyze your build and identify opportunities for optimization.
5. Configure different build options like source maps, build cache, and budgets to see how they affect the build output and performance.