---
title: PostgreSQL OFFSET
description: Learn how to use the OFFSET clause in PostgreSQL to skip a specific number of rows in your query results

---

# PostgreSQL OFFSET

## Introduction

When working with databases that contain large amounts of data, you'll often need to retrieve information in manageable chunks rather than all at once. PostgreSQL's `OFFSET` clause is a powerful feature that allows you to skip a specified number of rows before starting to return the results of your query. This is particularly useful for implementing pagination in web applications, creating reports with specific data ranges, or when you need to process data in batches.

In this article, we'll explore how the `OFFSET` clause works, its syntax, use cases, and best practices.

## Basic Syntax

The `OFFSET` clause is typically used with the `SELECT` statement and is placed after the `ORDER BY` clause:

```sql
SELECT column1, column2, ...
FROM table_name
ORDER BY column_name
OFFSET n;
```

Where `n` is the number of rows to skip before starting to return rows.

## How OFFSET Works

Let's understand how `OFFSET` works with a simple example. Consider a table called `employees` with the following data:

```sql
CREATE TABLE employees (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    position VARCHAR(100),
    salary NUMERIC(10, 2)
);

INSERT INTO employees (name, position, salary) VALUES
('John Doe', 'Developer', 75000.00),
('Jane Smith', 'Designer', 70000.00),
('Michael Johnson', 'Manager', 90000.00),
('Emily Williams', 'Developer', 78000.00),
('Robert Brown', 'Designer', 72000.00),
('Sarah Davis', 'Developer', 76000.00),
('James Miller', 'Manager', 92000.00),
('Lisa Wilson', 'Designer', 71000.00),
('David Moore', 'Developer', 77000.00),
('Jennifer Taylor', 'Manager', 95000.00);
```

Now, if we want to retrieve all employees but skip the first 3, we can use:

```sql
SELECT * FROM employees ORDER BY id OFFSET 3;
```

This would return:

```
 id |      name       |  position  |  salary   
----+-----------------+------------+-----------
  4 | Emily Williams  | Developer  | 78000.00
  5 | Robert Brown    | Designer   | 72000.00
  6 | Sarah Davis     | Developer  | 76000.00
  7 | James Miller    | Manager    | 92000.00
  8 | Lisa Wilson     | Designer   | 71000.00
  9 | David Moore     | Developer  | 77000.00
 10 | Jennifer Taylor | Manager    | 95000.00
```

As you can see, the query skipped the first 3 rows (with IDs 1, 2, and 3) and started returning results from the 4th row.

## OFFSET with LIMIT

`OFFSET` is most powerful when used with the `LIMIT` clause, which restricts the number of rows returned. Together, they provide a simple mechanism for pagination.

```sql
SELECT column1, column2, ...
FROM table_name
ORDER BY column_name
LIMIT x OFFSET y;
```

Where:
- `x` is the maximum number of rows to return
- `y` is the number of rows to skip

For example, to implement pagination with 3 employees per page:

Page 1:
```sql
SELECT * FROM employees ORDER BY id LIMIT 3 OFFSET 0;
```

Page 2:
```sql
SELECT * FROM employees ORDER BY id LIMIT 3 OFFSET 3;
```

Page 3:
```sql
SELECT * FROM employees ORDER BY id LIMIT 3 OFFSET 6;
```

Let's see the results for Page 2:

```
 id |      name      | position  |  salary   
----+----------------+-----------+-----------
  4 | Emily Williams | Developer | 78000.00
  5 | Robert Brown   | Designer  | 72000.00
  6 | Sarah Davis    | Developer | 76000.00
```

## Alternative Syntax

PostgreSQL also supports an alternative syntax for `OFFSET`:

```sql
SELECT * FROM employees ORDER BY id LIMIT ALL OFFSET 5;
```

This will skip the first 5 rows and return all remaining rows. The `ALL` keyword indicates that there's no limit on the number of rows returned other than what's available in the table.

## Real-world Applications

### 1. Web Application Pagination

The most common use case for `OFFSET` is implementing pagination in web applications. For example, if you're building a product listing page with 20 products per page:

```sql
-- For page 1
SELECT * FROM products ORDER BY name LIMIT 20 OFFSET 0;

-- For page 2
SELECT * FROM products ORDER BY name LIMIT 20 OFFSET 20;

-- For page n
SELECT * FROM products ORDER BY name LIMIT 20 OFFSET ((n-1) * 20);
```

### 2. Data Processing in Batches

When processing large datasets, it's often more efficient to work with smaller batches:

```sql
-- Process first batch
SELECT * FROM large_table ORDER BY id LIMIT 1000 OFFSET 0;

-- Process second batch
SELECT * FROM large_table ORDER BY id LIMIT 1000 OFFSET 1000;

-- And so on...
```

### 3. Reporting and Data Analysis

When generating reports that require different sections of data:

```sql
-- Get the top 5 highest paid employees
SELECT * FROM employees ORDER BY salary DESC LIMIT 5 OFFSET 0;

-- Get the next 5 highest paid employees
SELECT * FROM employees ORDER BY salary DESC LIMIT 5 OFFSET 5;
```

## Performance Considerations

While `OFFSET` is very useful, it comes with some performance implications that you should be aware of:

1. **Inefficiency with Large Offsets**: PostgreSQL still needs to scan and discard all the rows before the offset position. For large tables, this can become slow when the offset value is high.

2. **Consider Using Keyset Pagination**: For better performance with large tables, consider using keyset pagination (also known as "seek method") instead of `OFFSET`:

```sql
-- Instead of:
SELECT * FROM products ORDER BY id LIMIT 20 OFFSET 40;

-- Consider using:
SELECT * FROM products WHERE id > 40 ORDER BY id LIMIT 20;
```

This approach works well when you have a unique, indexed column to filter on.

## Combining with Other Clauses

`OFFSET` can be used with other SQL clauses to create more complex queries:

```sql
SELECT name, position, salary 
FROM employees 
WHERE position = 'Developer' 
ORDER BY salary DESC 
LIMIT 2 OFFSET 1;
```

This will return the 2nd and 3rd highest-paid developers, skipping the top-paid one.

## Common Errors and Troubleshooting

### 1. Non-integer OFFSET values

PostgreSQL requires `OFFSET` values to be non-negative integers. If you provide a decimal or negative number, you'll get an error:

```sql
-- This will fail:
SELECT * FROM employees OFFSET -5;

-- This will also fail:
SELECT * FROM employees OFFSET 1.5;
```

### 2. OFFSET with Unordered Results

When using `OFFSET`, it's a good practice to always include an `ORDER BY` clause; otherwise, the rows that are skipped might not be deterministic:

```sql
-- Not recommended (results may vary):
SELECT * FROM employees LIMIT 5 OFFSET 5;

-- Recommended (consistent results):
SELECT * FROM employees ORDER BY id LIMIT 5 OFFSET 5;
```

## Summary

The PostgreSQL `OFFSET` clause is a simple yet powerful feature that allows you to skip a specified number of rows in your query results. When combined with `LIMIT`, it provides an effective mechanism for implementing pagination and processing data in manageable chunks.

Remember these key points:

- Use `OFFSET` to skip a specific number of rows in your results
- Always use `ORDER BY` with `OFFSET` to ensure deterministic results
- Be aware of performance implications with large offset values
- Consider keyset pagination for better performance with large datasets

## Exercises

To help solidify your understanding, try these exercises:

1. Create a table with at least 20 rows of sample data.
2. Write a query to return rows 6-10 using `OFFSET` and `LIMIT`.
3. Implement a simple pagination system that displays 5 records per page.
4. Compare the performance of `OFFSET`-based pagination versus keyset pagination on a large dataset.
5. Write a query that uses `OFFSET` along with aggregation functions like `SUM` or `AVG`.

## Additional Resources

- [PostgreSQL Official Documentation on SELECT](https://www.postgresql.org/docs/current/sql-select.html)
- [Efficient Pagination Using Keyset Pagination](https://use-the-index-luke.com/sql/partial-results/fetch-next-page)
- [PostgreSQL Performance Optimization Guide](https://www.postgresql.org/docs/current/performance-tips.html)