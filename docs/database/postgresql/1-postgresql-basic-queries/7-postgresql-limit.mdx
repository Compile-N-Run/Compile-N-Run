---
title: "PostgreSQL LIMIT"
description: "Learn how to restrict the number of rows returned by a query using the PostgreSQL LIMIT clause"

---

# PostgreSQL LIMIT

## Introduction

When working with databases, you often need to retrieve only a subset of data rather than an entire table. This is especially true when dealing with large datasets where returning all records would be inefficient or overwhelming for users. PostgreSQL's `LIMIT` clause is a powerful feature that allows you to control exactly how many rows are returned by your query.

In this tutorial, you'll learn:
- What the LIMIT clause does and why it's useful
- Basic syntax and usage patterns
- How to combine LIMIT with other clauses
- Practical applications in real-world scenarios
- Common pitfalls and best practices

## Understanding LIMIT

The `LIMIT` clause restricts the number of rows returned by a query. It's placed at the end of your query and takes a positive integer value that specifies the maximum number of rows to return.

### Basic Syntax

```sql
SELECT column1, column2, ...
FROM table_name
LIMIT number_of_rows;
```

## Basic Examples

Let's start with some simple examples using a sample database of products.

### Example 1: Retrieving the first 5 products

```sql
SELECT product_id, product_name, price
FROM products
LIMIT 5;
```

**Output:**
```
 product_id |  product_name  | price
------------+----------------+-------
          1 | Laptop         | 899.99
          2 | Smartphone     | 699.99
          3 | Headphones     | 149.99
          4 | Tablet         | 349.99
          5 | Smart Watch    | 199.99
```

In this example, even if the products table contains hundreds of rows, only the first 5 rows will be returned.

### Example 2: Using LIMIT with ORDER BY

The LIMIT clause is often used with ORDER BY to get the "top N" results:

```sql
SELECT product_id, product_name, price
FROM products
ORDER BY price DESC
LIMIT 3;
```

**Output:**
```
 product_id |  product_name  | price
------------+----------------+-------
          1 | Laptop         | 899.99
          2 | Smartphone     | 699.99
          8 | Gaming Console | 499.99
```

This query returns the 3 most expensive products.

## The OFFSET Clause

Often used alongside LIMIT, the OFFSET clause allows you to skip a specified number of rows before starting to return rows.

### Basic Syntax with OFFSET

```sql
SELECT column1, column2, ...
FROM table_name
LIMIT number_of_rows OFFSET skip_rows;
```

### Example 3: Implementing pagination

```sql
-- Page 1 (first 5 items)
SELECT product_id, product_name, price
FROM products
LIMIT 5 OFFSET 0;

-- Page 2 (next 5 items)
SELECT product_id, product_name, price
FROM products
LIMIT 5 OFFSET 5;
```

**Output for Page 2:**
```
 product_id |  product_name   | price
------------+-----------------+-------
          6 | Wireless Mouse  |  39.99
          7 | External SSD    | 129.99
          8 | Gaming Console  | 499.99
          9 | Bluetooth Speaker| 79.99
         10 | Keyboard        |  59.99
```

This technique is commonly used in web applications to implement pagination, showing a fixed number of results per page.

## LIMIT and Performance

The LIMIT clause can significantly improve query performance when working with large datasets, as PostgreSQL will stop processing the query once it has returned the requested number of rows.

### Example 4: Performance optimization

```sql
-- Without LIMIT (potentially slow for large tables)
SELECT * FROM large_table;

-- With LIMIT (much faster)
SELECT * FROM large_table LIMIT 100;
```

However, it's important to note that the database engine still needs to identify all the rows that match your query conditions before applying LIMIT. For optimal performance, especially with complex conditions or sorting, consider using indexes on the relevant columns.

## FETCH Clause (SQL Standard Alternative)

PostgreSQL also supports the SQL standard `FETCH` clause which provides functionality similar to LIMIT.

### Example 5: Using FETCH FIRST

```sql
SELECT product_id, product_name
FROM products
FETCH FIRST 5 ROWS ONLY;
```

This is equivalent to `LIMIT 5`. The SQL standard syntax also supports:

```sql
-- These are all equivalent
FETCH FIRST 5 ROWS ONLY
FETCH FIRST 5 ROW ONLY
FETCH FIRST ROWS ONLY      -- Returns just 1 row
FETCH FIRST ROW ONLY       -- Returns just 1 row
```

## Practical Applications

Here are some real-world scenarios where LIMIT is particularly useful:

### Example 6: Top-performing products dashboard

```sql
SELECT product_name, SUM(order_quantity) as total_sold
FROM orders
JOIN products ON orders.product_id = products.id
WHERE order_date >= '2023-01-01'
GROUP BY product_name
ORDER BY total_sold DESC
LIMIT 10;
```

This query returns the top 10 best-selling products of the year for a dashboard.

### Example 7: Most recent activities

```sql
SELECT user_id, activity_type, created_at
FROM user_activities
ORDER BY created_at DESC
LIMIT 20;
```

This retrieves the 20 most recent user activities, useful for activity feeds.

### Example 8: Random sampling

```sql
SELECT *
FROM customer_survey_responses
ORDER BY RANDOM()
LIMIT 100;
```

This query selects a random sample of 100 survey responses for analysis.

## Common Pitfalls and Best Practices

### 1. Always use ORDER BY with LIMIT

Without an ORDER BY clause, the rows returned by LIMIT will be unpredictable:

```sql
-- Bad practice: results aren't predictable
SELECT * FROM products LIMIT 5;

-- Good practice: results are deterministic
SELECT * FROM products ORDER BY product_id LIMIT 5;
```

### 2. Calculating OFFSET for pagination

When implementing pagination, calculate the OFFSET value using:

```
OFFSET = (page_number - 1) * page_size
```

For example, for page 3 with 10 items per page:

```sql
SELECT * FROM products ORDER BY product_id LIMIT 10 OFFSET 20;
```

### 3. Performance considerations for deep pagination

Be cautious with large OFFSET values, as PostgreSQL still needs to scan and skip those rows:

```sql
-- This could be slow on large tables
SELECT * FROM products ORDER BY product_id LIMIT 10 OFFSET 10000;
```

For deep pagination, consider using keyset pagination instead:

```sql
-- More efficient for deep pagination
SELECT * FROM products 
WHERE product_id > 10000  -- Last ID from previous page
ORDER BY product_id 
LIMIT 10;
```

## Summary

The PostgreSQL LIMIT clause is an essential tool for controlling result set size in your queries. Key points to remember:

- Use LIMIT to restrict the number of rows returned by a query
- Combine with ORDER BY to get predictable results
- Use LIMIT with OFFSET for pagination
- Consider performance implications, especially with large datasets
- The SQL standard alternative is the FETCH clause

By mastering LIMIT, you can create more efficient queries that return exactly the data you need.

## Exercises

1. Write a query to find the 5 least expensive products in the products table.
2. Implement a query for page 3 of a product list with 10 products per page.
3. Write a query to find the most recent order for each customer, limiting to the top 20 customers by total spending.
4. Compare the performance of a query with and without LIMIT on a large table in your database.

## Additional Resources

- [PostgreSQL Official Documentation on LIMIT and FETCH](https://www.postgresql.org/docs/current/queries-limit.html)
- [SQL ORDER BY Clause](https://www.postgresql.org/docs/current/queries-order.html)
- [Database Indexing Strategies](https://www.postgresql.org/docs/current/indexes.html)