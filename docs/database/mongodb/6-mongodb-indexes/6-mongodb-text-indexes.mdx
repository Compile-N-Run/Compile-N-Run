---
title: "MongoDB Text Indexes"
description: "Learn how to use MongoDB text indexes for efficient full-text search capabilities in your applications"

---

# MongoDB Text Indexes

## Introduction

Text search is a common requirement in many applications, from search engines to content management systems. MongoDB provides powerful full-text search functionality through text indexes. These specialized indexes allow you to search for text content efficiently across multiple fields in your documents.

In this tutorial, you'll learn how to create and use text indexes in MongoDB to perform full-text searches on your data. Text indexes are invaluable when you need to search through large amounts of textual content such as articles, blog posts, product descriptions, or user comments.

## What are Text Indexes?

A text index in MongoDB is a special type of index that supports text search queries on string content. Unlike regular indexes that match exact values or ranges, text indexes tokenize and stem the content of string fields to enable efficient searching across words and phrases.

Key features of text indexes include:

1. **Word Stemming**: Reduces words to their root form (e.g., "running" â†’ "run")
2. **Stop Words Filtering**: Ignores common words like "the", "and", "a", etc.
3. **Multi-language Support**: Can be configured for different languages
4. **Multiple Fields**: Can index and search across multiple document fields
5. **Relevance Scoring**: Results include a score indicating how well they match the query

## Creating a Text Index

Let's start by creating a simple text index on a collection of blog posts.

### Basic Text Index

```js
// Creating a text index on the 'content' field of a 'posts' collection
db.posts.createIndex({ content: "text" });
```

This command creates a text index on the `content` field, enabling efficient text searches through the content of your blog posts.

### Compound Text Index (Multiple Fields)

You can create a text index on multiple fields to search across them:

```js
// Creating a text index on both 'title' and 'content' fields
db.posts.createIndex({ title: "text", content: "text" });
```

Now your text searches will match content in both the `title` and `content` fields.

### Text Index with Weights

You can assign different weights to fields to prioritize matches in certain fields:

```js
// Creating a text index with weights
db.posts.createIndex(
  { title: "text", content: "text", tags: "text" },
  { weights: { title: 10, content: 5, tags: 1 } }
);
```

In this example, matches in the `title` field are considered 10 times more important than matches in the `tags` field, and matches in the `content` field are 5 times more important than matches in the `tags` field.

## Performing Text Searches

Once you've created a text index, you can perform text searches using the `$text` operator.

### Basic Text Search

```js
// Find documents containing the word "mongodb"
db.posts.find({ $text: { $search: "mongodb" } });
```

This query returns all documents where any indexed field contains the word "mongodb".

### Example with Sample Data

Let's see how this works with some sample data:

```js
// First, let's insert some sample blog posts
db.posts.insertMany([
  {
    title: "Getting Started with MongoDB",
    content: "MongoDB is a popular NoSQL database that provides high performance and scalability.",
    tags: ["database", "nosql", "beginner"]
  },
  {
    title: "Advanced MongoDB Indexing",
    content: "Learn how to optimize your MongoDB queries with proper indexing strategies.",
    tags: ["database", "performance", "advanced"]
  },
  {
    title: "Web Development Basics",
    content: "This tutorial covers HTML, CSS, and JavaScript fundamentals for beginners.",
    tags: ["web", "frontend", "beginner"]
  }
]);

// Now let's create a text index
db.posts.createIndex({ title: "text", content: "text", tags: "text" });

// Search for "mongodb"
db.posts.find({ $text: { $search: "mongodb" } });
```

The search results would include the first two documents since they contain "MongoDB" in either the title or content fields.

### Search Multiple Terms

You can search for multiple terms:

```js
// Find documents containing either "mongodb" or "indexing"
db.posts.find({ $text: { $search: "mongodb indexing" } });
```

This query returns documents that contain either "mongodb" OR "indexing" in any of the indexed fields.

### Phrase Search

To search for an exact phrase, enclose it in quotes:

```js
// Find documents containing the exact phrase "MongoDB is a popular"
db.posts.find({ $text: { $search: "\"MongoDB is a popular\"" } });
```

### Excluding Terms

You can exclude terms by prefixing them with a minus sign:

```js
// Find documents containing "mongodb" but not "advanced"
db.posts.find({ $text: { $search: "mongodb -advanced" } });
```

## Sorting by Relevance

MongoDB assigns a relevance score to each document that matches a text search. You can sort the results by this score:

```js
// Search for "mongodb" and sort by relevance score
db.posts.find(
  { $text: { $search: "mongodb database" } },
  { score: { $meta: "textScore" } }
).sort({ score: { $meta: "textScore" } });
```

The output might look something like:

```js
[
  {
    "_id": ObjectId("..."),
    "title": "Getting Started with MongoDB",
    "content": "MongoDB is a popular NoSQL database that provides high performance and scalability.",
    "tags": ["database", "nosql", "beginner"],
    "score": 2.5
  },
  {
    "_id": ObjectId("..."),
    "title": "Advanced MongoDB Indexing",
    "content": "Learn how to optimize your MongoDB queries with proper indexing strategies.",
    "tags": ["database", "performance", "advanced"],
    "score": 1.5
  }
]
```

The first document has a higher score because it contains both search terms ("mongodb" and "database") prominently.

## Language Support

MongoDB text indexes support multiple languages. You can specify a language when creating the index:

```js
// Creating a text index with Spanish language support
db.posts.createIndex(
  { title: "text", content: "text" },
  { default_language: "spanish" }
);
```

You can also specify the language on a per-document basis:

```js
db.posts.insertOne({
  title: "Aprende MongoDB",
  content: "MongoDB es una base de datos NoSQL muy potente.",
  language: "spanish"
});
```

And then specify the language field when creating the index:

```js
db.posts.createIndex(
  { title: "text", content: "text" },
  { language_override: "language" }
);
```

## Limitations and Considerations

When using text indexes, keep these limitations in mind:

1. **One Text Index Per Collection**: MongoDB allows only one text index per collection.

2. **Index Size**: Text indexes can be significantly larger than regular indexes because they index each word.

3. **Performance**: Text searches are more resource-intensive than exact match or range queries.

4. **Stop Words**: Common words like "a", "the", "in" are ignored during text searches.

5. **Case Insensitivity**: Text searches are case-insensitive by default.

## Real-World Application: Building a Blog Search Feature

Let's implement a simple blog search feature using MongoDB text indexes:

```js
// Step 1: Create a sample blog posts collection
db.blog.insertMany([
  {
    title: "Introduction to MongoDB",
    content: "MongoDB is a document database with the scalability and flexibility that you want with the querying and indexing that you need.",
    author: "John Doe",
    tags: ["mongodb", "database", "nosql"],
    createdAt: new Date("2023-01-15")
  },
  {
    title: "JavaScript Fundamentals",
    content: "JavaScript is the programming language of the Web. It powers interactive web pages and is essential for modern web development.",
    author: "Jane Smith",
    tags: ["javascript", "programming", "web"],
    createdAt: new Date("2023-02-10")
  },
  {
    title: "MongoDB Indexing Strategies",
    content: "Proper indexing is crucial for MongoDB performance. This post explores various indexing strategies including compound indexes and text indexes.",
    author: "John Doe",
    tags: ["mongodb", "database", "performance", "indexing"],
    createdAt: new Date("2023-03-20")
  }
]);

// Step 2: Create a text index on relevant fields
db.blog.createIndex({ 
  title: "text", 
  content: "text", 
  tags: "text" 
}, {
  weights: {
    title: 10,
    content: 5,
    tags: 3
  },
  name: "blog_search_index"
});

// Step 3: Implement search functionality
function searchBlog(query) {
  return db.blog.find(
    { $text: { $search: query } },
    { score: { $meta: "textScore" } }
  )
  .sort({ score: { $meta: "textScore" } })
  .limit(10)
  .toArray();
}

// Example usage:
const results = searchBlog("mongodb indexing");
console.log(results);
```

The search function returns blog posts related to "mongodb indexing" sorted by relevance.

## Summary

MongoDB text indexes provide a powerful way to implement full-text search capabilities in your applications. Here's what we covered:

- Creating basic and compound text indexes
- Assigning weights to different fields
- Performing various types of text searches
- Sorting results by relevance
- Supporting multiple languages
- Understanding limitations and considerations
- Building a real-world blog search feature

By implementing text indexes, you can enhance your application with efficient text search capabilities without needing to integrate a separate search engine for basic use cases.

## Additional Resources

Here are some exercises to help you practice using MongoDB text indexes:

1. Create a product catalog with text indexes for product names and descriptions.
2. Implement a multi-language search feature for a global application.
3. Build a logging system where you can search through log messages using text indexes.

For more advanced text search capabilities, you might want to explore:

- MongoDB Atlas Search, which provides more advanced full-text search capabilities
- Integration with dedicated search engines like Elasticsearch for more complex search requirements

Happy coding!